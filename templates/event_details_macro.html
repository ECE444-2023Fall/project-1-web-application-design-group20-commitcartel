{% macro event_details(data) %}
    <div class="event-header">
        <div>
            <a href="/clubs/{{ data['club_id'] }}" class="club_name_header">{{ data['club_name'] }}</a>
            <h1 class="club_event_name">{{ data['event_name'] }}</h1>
        </div>
        <a onclick="registerUserToEvent()" class="submit-review-button">Submit a Review</a>
    </div>
    <p style="font-family: Verdana, sans-serif; font-weight: bold; font-style: italic;"> Event Description: </p>
    <pre class="event-description" style="font-size: medium; font-family: Verdana, sans-serif;">{{ data['event_description'] }}</pre>
    <br>
    <p style="font-family: Verdana, sans-serif; font-weight: bold; font-style: italic;"> Event Details: </p>
    <p style="font-family: Verdana, sans-serif;">
        Status: {{ 'Complete' if data['completed'] else 'Active' }}
    </p>
    <p style="font-family: Verdana, sans-serif;">Date: {{ data['date'] }}</p>
    <p style="font-family: Verdana, sans-serif;">Time: {{ data['time'] }}</p>
    <p style="font-family: Verdana, sans-serif;">Club: {{ data['club_name'] }}</p>
    <p style="font-family: Verdana, sans-serif;">Location: {{ data['location'] }}</p>
    <p style="font-family: Verdana, sans-serif;">Attending: {{ data['num_attending'] }}</p>

    <script>
        function registerUserToEvent() {
            let user_id = JSON.parse('{{ data['user_id'] | tojson }}');
            let event_id = JSON.parse('{{ data['event_id'] | tojson }}');
            // let user_id = data['user_id']
            // let event_id = data['event_id']
         // Create a data object to send in the request
         let data = new FormData();
        data.append('event_id', event_id);
        data.append('user_id', user_id);

        // Send a PATCH request to the server
        fetch('http://127.0.0.1:5000/register_event', {
            method: 'PATCH',
            body: data,
        })
        .then(response => {
            if (response.ok) {
                // Registration was successful
                console.log('User registered for the event.');
            } else {
                // Handle errors here
                console.error('Registration failed.');
            }
        })
        .catch(error => {
            console.error('Request failed:', error);
        });
        }
    </script>
{% endmacro %}
